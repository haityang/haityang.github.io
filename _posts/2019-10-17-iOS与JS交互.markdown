1.iOS---æ‰§è¡Œ--->JS
---
1.ä½¿ç”¨UIWebViewçš„å¯¹è±¡æ–¹æ³•

\- (nullable NSString *)stringByEvaluatingJavaScriptFromString:(NSString *)script;



```
[webView stringByEvaluatingJavaScriptFromString:@"alert('JSå¼¹æ¡†')"];

```


2.WKWebViewæ‰§è¡ŒJSä»£ç 

\- (void)evaluateJavaScript:(NSString *)javaScriptString completionHandler:(void (^ _Nullable)(_Nullable id, NSError * _Nullable error))completionHandler;

```
 NSString *jsStr_1 = @"var p = document.getElementsByTagName('p')[0];";
 NSString *jsStr_2 = @"p.innerHTML = 'ä½¿ç”¨JavaScriptå¾ˆğŸ‚';";

 [webView evaluateJavaScript:jsStr_1 completionHandler:nil];
 [webView evaluateJavaScript:jsStr_2 completionHandler:^(id _Nullable value, NSError * _Nullable error) {
        NSLog(@"value: %@",value); //æ‰“å°å‡ºæ’å…¥çš„å†…å®¹ï¼šä½¿ç”¨JavaScriptå¾ˆğŸ‚
    }];

```

3.ä½¿ç”¨JSContextè¿è¡ŒJSä»£ç 

\- (JSValue *)evaluateScript:(NSString *)script;

```
JSValue *value1 = [context evaluateScript:@"var arr = [88, 'mengyueping', 66];"];
JSValue *jsArr = context[@"arr"];
jsArr[0] = @"www.";

```

4.å–å‡ºå­˜å‚¨çš„jså‡½æ•°ï¼Œå¹¶æ‰§è¡Œ

```
[context evaluateScript:@"function add(a, b){ return a + b; }"];
JSValue *addValue = context[@"add"]; 

JSValue *sum = [addValue callWithArguments:@[@1,@2]];

```

5.å¦ä¸€ç§æ–¹æ³•ï¼Œå–å‡ºå­˜å‚¨çš„jså‡½æ•°ï¼Œå¹¶æ‰§è¡Œã€‚

```
JSValue *jsValue = [context evaluateScript:@"function multiply(a, b){ return a * b; }"];
JSValue *multiplyValue = [jsValue.context.globalObject invokeMethod:@"multiply" withArguments:@[@3,@6]]; //ç¬¬ä¸€ç§å½¢å¼

```

æˆ–è€…ï¼š

```
JSValue *jsValue = [context evaluateScript:@"function multiply(a, b){ return a * b; }"];
JSValue *multiplyValue = [context.globalObject invokeMethod:@"multiply" withArguments:@[@3,@6]]; //ç¬¬äºŒç§å½¢å¼
NSLog(@"multiplyValue: %d",multiplyValue.toInt32); 

```


2.JS---æ‰§è¡Œ--->iOS
---
1.WKWebViewä¸JSä¹‹é—´çš„é€šä¿¡

é€šè¿‡WKWebViewConfigurationï¼ŒWKUserContentControllerï¼ŒWKScriptMessageHandlerå®ç°ã€‚


```

1. OC ä»£ç  ----ï¼š
WKUserContentController *userContentController = [[WKUserContentController alloc] init];
[userContentController addScriptMessageHandler:self name:@"JSMessageToIOS"];

WKWebViewConfiguration *configuration = [[WKWebViewConfiguration alloc] init];
configuration.userContentController = userContentController; 

WKWebView *webView = [[WKWebView alloc] initWithFrame:self.view.bounds configuration:configuration];

å›è°ƒï¼š
- (void)userContentController:(WKUserContentController *)userContentController didReceiveScriptMessage:(WKScriptMessage *)message
{
    [self openCamera];
}

2. JSç«¯----ï¼š
window.webkit.messageHandlers.JSMessageToIOS.postMessage(message);


```


2.æŠŠBlockæ³¨å†Œåˆ°JSContextä¸­

```
context[@"log"] = ^(){
    NSArray *args = [JSContext currentArguments];
    for (JSValue *jsVal in args) {
        NSLog(@"%@",jsVal);
    }
    JSValue *this = [JSContext currentThis];
};

[context evaluateScript:@"log('mengyueping', [10,20], {'hello': 'world', 'number': '100'})"];

```

